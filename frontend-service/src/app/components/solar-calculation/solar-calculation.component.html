<div class="zev-container">
  <h1>Solar Distribution Berechnung</h1>

  <div *ngIf="message" class="zev-message" [ngClass]="'zev-message--' + messageType">
    {{ message }}
  </div>

  <form (ngSubmit)="onSubmit()">
    <div class="zev-form-group">
      <label for="dateFrom">Von Datum:</label>
      <input type="date" id="dateFrom" class="zev-input" name="dateFrom" [(ngModel)]="dateFrom" (ngModelChange)="onDateFromChange()" required>
    </div>

    <div class="zev-form-group">
      <label for="dateTo">Bis Datum:</label>
      <input type="date" id="dateTo" class="zev-input" name="dateTo" [(ngModel)]="dateTo" required>
    </div>

    <button type="submit" class="zev-button zev-button--primary" [disabled]="calculating || !dateFrom || !dateTo">
      {{ calculating ? 'Berechnung läuft...' : 'Berechnen' }}
    </button>
  </form>

  <div *ngIf="result" class="result-summary">
    <h2>Zusammenfassung</h2>
    <div class="summary-grid">
      <div class="summary-item">
        <span class="label">Zeitbereich:</span>
        <span class="value">{{ result.dateFrom | date:'short' }} - {{ result.dateTo | date:'short' }}</span>
      </div>
      <div class="summary-item">
        <span class="label">Verarbeitete Zeitstempel:</span>
        <span class="value">{{ result.processedTimestamps }}</span>
      </div>
      <div class="summary-item">
        <span class="label">Verarbeitete Einträge:</span>
        <span class="value">{{ result.processedRecords }}</span>
      </div>
      <div class="summary-item">
        <span class="label">Gesamt Solar Produktion:</span>
        <span class="value">{{ result.totalSolarProduced | number:'1.2-2' }} kWh</span>
      </div>
      <div class="summary-item">
        <span class="label">Gesamt Verteilt:</span>
        <span class="value">{{ result.totalDistributed | number:'1.2-2' }} kWh</span>
      </div>
    </div>
  </div>
</div>
