<div class="zev-container">
  <h1>Einheiten Verwaltung</h1>

  <div *ngIf="message" class="zev-message" [ngClass]="'zev-message--' + messageType">
    {{ message }}
  </div>

  <div *ngIf="!showForm">
    <button class="zev-button zev-button--primary" (click)="onCreateNew()">Neue Einheit erstellen</button>

    <table class="zev-table" *ngIf="einheiten.length > 0">
      <thead>
        <tr>
          <th class="zev-table__header--sortable" (click)="onSort('id')">
            ID
            <span class="zev-table__sort-indicator" *ngIf="sortColumn === 'id'">
              {{ sortDirection === 'asc' ? '▲' : '▼' }}
            </span>
          </th>
          <th class="zev-table__header--sortable" (click)="onSort('name')">
            Name
            <span class="zev-table__sort-indicator" *ngIf="sortColumn === 'name'">
              {{ sortDirection === 'asc' ? '▲' : '▼' }}
            </span>
          </th>
          <th class="zev-table__header--sortable" (click)="onSort('typ')">
            Typ
            <span class="zev-table__sort-indicator" *ngIf="sortColumn === 'typ'">
              {{ sortDirection === 'asc' ? '▲' : '▼' }}
            </span>
          </th>
          <th>Aktionen</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let einheit of einheiten">
          <td>{{ einheit.id }}</td>
          <td>{{ einheit.name }}</td>
          <td>{{ einheit.typ }}</td>
          <td>
            <div class="zev-table-actions">
              <button class="zev-button zev-button--secondary" (click)="onEdit(einheit)">Bearbeiten</button>
              <button class="zev-button zev-button--danger" (click)="onDelete(einheit.id)">Löschen</button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>

    <p *ngIf="einheiten.length === 0">Keine Einheiten vorhanden.</p>
  </div>

  <app-einheit-form
    *ngIf="showForm"
    [einheit]="selectedEinheit"
    (save)="onFormSubmit($event)"
    (cancel)="onFormCancel()"
  ></app-einheit-form>
</div>
